(function(){"use strict";var t={8181:function(t,e,i){var a=i(7764),o=i(4108);const s={class:"app-container"};function n(t,e){const i=(0,o.E1)("router-view");return(0,o.Wz)(),(0,o.An)("div",s,[(0,o.K2)(i)])}var l=i(4100);const r={},c=(0,l.c)(r,[["render",n]]);var h=c,d=i(7464);const u={class:"container"};function p(t,e,i,a,s,n){const l=(0,o.E1)("MainMenu"),r=(0,o.E1)("MainEditor");return(0,o.Wz)(),(0,o.An)("div",u,[(0,o.K2)(l,{onOnImageSelected:t.handleImageSelected,state:t.state,onChangeState:t.changeState},null,8,["onOnImageSelected","state","onChangeState"]),(0,o.K2)(r,{img:t.img,onChangeState:t.changeState,state:t.state},null,8,["img","onChangeState","state"])])}var g=i(9096),m=i.p+"img/file.a290c5fe.png",w=i.p+"img/pipette.cfbb3848.png",b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAbklEQVR4nO2WUQrAIAxDczzPbT/GrtEdpDKYP0OxTGXD5UH/TAJSaADyRwKAA4DdRhxaKej08myiBfE58WFwDm+SH4/C7WcM7sT9g+JcJC+j/QghH2YHsL3hZzwSy99jrdQXmV19QiU8zi57ZC0SrDhYLpB5QEwAAAAASUVORK5CYII=",f=i.p+"img/hand.61922003.png",v=i.p+"img/downloads.4e7ad81c.png",A="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6UlEQVR4nO2WzUpbQRiGH7A7dddFNUqpFZPLqHWpFqsuWr2CmLiQ5Ea6M8ULEFvtDzbuFbeKXaR4FcafTUxC5IM3MBzOnExORLrwhYHD+Wa+d77/gWf8h5gEisAR8A+407LvKlAAJh6TMANUgCbQ6bHawB7welDSD8CNlDaAXeATkAWGtez7s2QN7bUzi2lJN2VBR1a8ichPgZPIvyngu2N9MY2lbaAFbHn2GOmxR1bS2XY/lmcc9/pIQ1CSjmtgLOTAjuPeQbEvXZWQkmkpSSymP4ALYChmb1yMDS+Av8AB8Fa6mvKkF0Xd0DLU8CuB2BfjLrFdGnmuA2wkEVe1ycojilngCliOka1I9i5Gti6dh0nEl9o0EyObA+oe4lXJ7HJRZKXTOpwX3WwepTd8MY5i1Gkqj0KcVMd9E1/2cLXFcSlG9lGy92ldXU1Irm6MjSQuueoe4qDkKkTK6TdwlqKOz4GfkXLKJxFPqNgbaviD1LERT4c2EMNX3dCmzKA4kK7tkM3jTnZbo0+LsnRY7F+FHlp0xmIpRR2XnbE43++Ni85DYF8Nv1eMpx33tpWsqbCgedp9+liGrgE5YEQrp5L5Btw77u3b0iheAl8CH3tNzd6gwR+KjGrxD1ADbrVqag75kJJ5Bk+NB6Bjr/PIn1BmAAAAAElFTkSuQmCC",C="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAABR0lEQVR4nO2ZQU7DMBBFn1gjKhZOUU+CegSgh2bNroGK2xilciWTBpPYM4kJ8yRLURI/22Mri3xI8wq8UUYVDh/an3f4GiaBLaSyamI7Ulk1sR2prJr81x3ZA3cjBPfAAbgpcGyAZw3HY3jxCDQJQRPe6e699MQ5jidpx2304B3YDgi24dlloH7VanHgIsknsIsEXQXacH0CHvqdK3MQS06R4HJ9DO+kaKKK5TqcwDy+SeKWrMDAYtpChxOYx5VkUueBncl1OIF5nCXt2G38gW7Qj0KHE5jHuWN258ochmGsBb+SxmoWYhiGoR4XzOH8FY3Pnl/iU2oLSeBtRwqwo5XA29EqwI7WkkdrLxA5aEQQk5CIHFCIICYj8qt/BucoRH71z+AchURcoBIf5CARF6jEBzlIxAUq8cFScYFKfEDmwNIDZju/ABKYnW9iS/LnAAAAAElFTkSuQmCC";const D=t=>((0,o.ED)("data-v-b699b916"),t=t(),(0,o.ii)(),t),I={class:"menu"},y=D((()=>(0,o.QD)("label",{for:"fileInput",class:"button-label"},[(0,o.QD)("img",{class:"button-image",src:m,alt:"Select Image"})],-1))),x={class:"url"},Q=["disabled"],k=D((()=>(0,o.QD)("img",{class:"button-image",src:w,alt:"Pipette"},null,-1))),M=[k],S=["disabled"],U=D((()=>(0,o.QD)("img",{class:"button-image",src:b,alt:"modal"},null,-1))),E=[U],R=["disabled"],B=D((()=>(0,o.QD)("img",{class:"button-image",src:f,alt:"Move Image"},null,-1))),W=[B],N=["disabled"],X=D((()=>(0,o.QD)("img",{class:"button-image",src:v,alt:"Save Image"},null,-1))),Y=[X],F=["disabled"],z=D((()=>(0,o.QD)("img",{class:"button-image",src:A,alt:"Correct Image"},null,-1))),K=[z],G=["disabled"],O=D((()=>(0,o.QD)("img",{class:"button-image",src:C,alt:"Filter Image"},null,-1))),L=[O];function P(t,e,i,s,n,l){return(0,o.Wz)(),(0,o.An)("div",I,[(0,o.QD)("button",{class:"menu-button",onClick:e[1]||(e[1]=(...e)=>t.handleButtonClick&&t.handleButtonClick(...e)),value:"input",title:"Choose an image file using the file selection dialog"},[y,(0,o.QD)("input",{id:"fileInput",class:"button-input",type:"file",onChange:e[0]||(e[0]=(...e)=>t.handleImageSelection&&t.handleImageSelection(...e))},null,32)]),(0,o.QD)("div",x,[(0,o.wt)((0,o.QD)("input",{class:"url-input","onUpdate:modelValue":e[2]||(e[2]=e=>t.imageUrl=e),placeholder:"URL",onKeydown:e[3]||(e[3]=(0,a.jj)(((...e)=>t.loadImageFromUrl&&t.loadImageFromUrl(...e)),["enter"]))},null,544),[[a.Og,t.imageUrl]])]),(0,o.QD)("button",{class:"menu-button",onClick:e[4]||(e[4]=(...e)=>t.handleButtonClick&&t.handleButtonClick(...e)),disabled:!t.selectedImage,value:"pipette",title:"Use the pipette tool to select a color from the image"},[(0,o.QD)("label",{class:(0,g.WN)(["button-label",{"button-label-tapped":"pipette"===t.state,disabled:!t.selectedImage}])},M,2)],8,Q),(0,o.QD)("button",{class:"menu-button",onClick:e[5]||(e[5]=(...e)=>t.handleButtonClick&&t.handleButtonClick(...e)),disabled:!t.selectedImage,value:"modal",title:"Display a modal window on the image for inputting additional information or performing a specific action."},[(0,o.QD)("label",{class:(0,g.WN)(["button-label",{"button-label-tapped":"modal"===t.state,disabled:!t.selectedImage}])},E,2)],8,S),(0,o.QD)("button",{class:"menu-button",onClick:e[6]||(e[6]=(...e)=>t.handleButtonClick&&t.handleButtonClick(...e)),disabled:!t.selectedImage,value:"hand",title:"Move the image across the canvas"},[(0,o.QD)("label",{class:(0,g.WN)(["button-label",{"button-label-tapped":"hand"===t.state,disabled:!t.selectedImage}])},W,2)],8,R),(0,o.QD)("button",{class:"menu-button",onClick:e[7]||(e[7]=(...e)=>t.handleButtonClick&&t.handleButtonClick(...e)),disabled:!t.selectedImage,value:"save",title:"Save the current image after making any necessary edits"},[(0,o.QD)("label",{class:(0,g.WN)(["button-label",{disabled:!t.selectedImage}])},Y,2)],8,N),(0,o.QD)("button",{class:"menu-button",onClick:e[8]||(e[8]=(...e)=>t.handleButtonClick&&t.handleButtonClick(...e)),disabled:!t.selectedImage,value:"correct",title:"Edit the current image"},[(0,o.QD)("label",{class:(0,g.WN)(["button-label",{disabled:!t.selectedImage}])},K,2)],8,F),(0,o.QD)("button",{class:"menu-button",onClick:e[9]||(e[9]=(...e)=>t.handleButtonClick&&t.handleButtonClick(...e)),disabled:!t.selectedImage,value:"filter",title:"Filter the current image"},[(0,o.QD)("label",{class:(0,g.WN)(["button-label",{disabled:!t.selectedImage}])},L,2)],8,G)])}i(2168),i(5104),i(8312);var j=(0,o._M)({name:"MainMenu",props:{state:String},data(){return{selectedImage:"",imageUrl:""}},methods:{handleImageSelection(t){const e=t.target,i=e.files?.[0];if(i){const t=URL.createObjectURL(i);this.selectedImage=t,this.$emit("onImageSelected",t),e.value=""}},loadImageFromUrl(){this.imageUrl&&(this.$emit("onImageSelected",this.imageUrl),this.selectedImage=this.imageUrl,this.imageUrl="")},handleButtonClick(t){const e=t.target,i=e.parentElement?.value?e.parentElement.value:e.parentElement?.parentElement.value;this.$emit("changeState",i)}},beforeUnmount(){this.selectedImage&&URL.revokeObjectURL(this.selectedImage)},watch:{state(t){this.stateCursor="pipette"===t?"pipette":null}}});const H=(0,l.c)(j,[["render",P],["__scopeId","data-v-b699b916"]]);var V=H,T=i.p+"img/lock.7644d047.png",$=i.p+"img/unlock.fa6631a4.png";const J=t=>((0,o.ED)("data-v-100da529"),t=t(),(0,o.ii)(),t),Z={class:"editor"},q={class:"modal"},_=J((()=>(0,o.QD)("option",{value:"percentage"},"Percentage",-1))),tt=J((()=>(0,o.QD)("option",{value:"pixels"},"Pixels",-1))),et=[_,tt],it={class:"sizes"},at={class:"input-with-prefix"},ot=J((()=>(0,o.QD)("label",{for:"width",style:{left:"3px"}},"W",-1))),st={for:"width",class:"type",style:{right:"3px"}},nt=["value"],lt={class:"custom-checkbox"},rt={key:0,class:"checkbox-image",src:T,alt:"Lock"},ct={key:1,class:"checkbox-image",src:$,alt:"Unlock"},ht={class:"input-with-prefix"},dt=J((()=>(0,o.QD)("label",{for:"height",style:{left:"6px"}}," H",-1))),ut={for:"height",class:"type",style:{right:"3px"}},pt=["value"],gt={class:"interpolation"},mt=J((()=>(0,o.QD)("label",{for:"interpolation"},"Interpolation:",-1))),wt=J((()=>(0,o.QD)("option",null,null,-1))),bt=J((()=>(0,o.QD)("option",{value:"nearestNeighbor",title:"Nearest Neighbor: Each pixel in the new image is assigned the value of the nearest pixel in the original image."}," Nearest Neighbor ",-1))),ft=[wt,bt],vt={class:"sizes-counter"};function At(t,e,i,s,n,l){const r=(0,o.E1)("MainCanvas"),c=(0,o.E1)("StatusBar"),h=(0,o.E1)("ModalWindow"),d=(0,o.E1)("SideBar");return(0,o.Wz)(),(0,o.An)(o.ae,null,[(0,o.QD)("div",Z,[(0,o.K2)(r,{ref:"canvas",state:t.state,img:t.img,origImg:t.origImg,newImg:t.newImg,scale:t.scale,interpolationCb:t.interpolationCb,newiw:t.newiw,newih:t.newih,isShowCorrection:t.isShowCorrection,isShowFiltration:t.isShowFiltration,onUpdateImageSizes:t.updateImageSizes,onUpdateColor:t.updateColor,onUpdateCoordinates:t.updateCoordinates,onCloseCorrection:t.closeCorrection,onCloseFiltration:t.closeFiltration,onRevertNewImg:t.revertNewImg,onUpdateNewImgData:t.updateNewImgData},null,8,["state","img","origImg","newImg","scale","interpolationCb","newiw","newih","isShowCorrection","isShowFiltration","onUpdateImageSizes","onUpdateColor","onUpdateCoordinates","onCloseCorrection","onCloseFiltration","onRevertNewImg","onUpdateNewImgData"]),(0,o.K2)(c,{state:t.state,imageHeight:t.ih,imageWidth:t.iw,pickedColor:t.pickedColor,xMouse:t.xMouse,yMouse:t.yMouse,scale:t.scale,onUpdateScale:e[0]||(e[0]=e=>t.scale=e)},null,8,["state","imageHeight","imageWidth","pickedColor","xMouse","yMouse","scale"])]),(0,o.wt)((0,o.K2)(h,{onClose:t.closeModal},{body:(0,o.Ql)((()=>[(0,o.QD)("div",q,[(0,o.wt)((0,o.QD)("select",{class:"resize-unit",id:"resizeUnit","onUpdate:modelValue":e[1]||(e[1]=e=>t.resizeUnit=e),onChange:e[2]||(e[2]=e=>t.updateModal(e))},et,544),[[a.Ip,t.resizeUnit]]),(0,o.QD)("div",it,[(0,o.QD)("div",at,[ot,(0,o.QD)("label",st,(0,g.WA)("pixels"===t.resizeUnit?"px":"%"),1),(0,o.QD)("input",{id:"width",value:t.newiw,onChange:e[3]||(e[3]=(...e)=>t.updateNewiw&&t.updateNewiw(...e))},null,40,nt)]),(0,o.QD)("div",lt,[(0,o.wt)((0,o.QD)("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=e=>t.bind=e)},null,512),[[a.cV,t.bind]]),t.bind?((0,o.Wz)(),(0,o.An)("img",rt)):((0,o.Wz)(),(0,o.An)("img",ct))]),(0,o.QD)("div",ht,[dt,(0,o.QD)("label",ut,(0,g.WA)("pixels"===t.resizeUnit?"px":"%"),1),(0,o.QD)("input",{id:"height",value:t.newih,onChange:e[5]||(e[5]=(...e)=>t.updateNewih&&t.updateNewih(...e))},null,40,pt)])]),(0,o.QD)("div",gt,[mt,(0,o.wt)((0,o.QD)("select",{"onUpdate:modelValue":e[6]||(e[6]=e=>t.interpolation=e),id:"interpolation"},ft,512),[[a.Ip,t.interpolation]])]),(0,o.QD)("div",vt,[(0,o.QD)("p",null,"Now: "+(0,g.WA)(t.getResolutionNow())+" MPs",1),(0,o.QD)("p",null,"After: "+(0,g.WA)(t.getResolutionAfter())+" MPs",1)])])])),footer:(0,o.Ql)((()=>[(0,o.QD)("button",{onClick:e[7]||(e[7]=(...e)=>t.handleConfirm&&t.handleConfirm(...e)),class:"confirm-button"},"Confirm")])),_:1},8,["onClose"]),[[a.Ub,t.isShowModal]]),(0,o.wt)((0,o.K2)(d,{state:t.state,pickedColor:t.pickedColor,xMouse:t.xMouse,yMouse:t.yMouse,onClose:t.closePanel,onChangeState:e[8]||(e[8]=e=>t.$emit("changeState",e))},null,8,["state","pickedColor","xMouse","yMouse","onClose"]),[[a.Ub,t.isShowPanel]])],64)}i(2912),i(9904),i(6096);function Ct(t,e,i){const a=t.width,o=t.height,s=a/e,n=o/i,l=new Uint8ClampedArray(e*i*4);for(let r=0;r<i;r++)for(let i=0;i<e;i++){const o=Math.floor(i*s),c=Math.floor(r*n),h=4*(r*e+i),d=4*(c*a+o);l[h]=t.data[d],l[h+1]=t.data[d+1],l[h+2]=t.data[d+2],l[h+3]=t.data[d+3]}return new ImageData(l,e,i)}const Dt={class:"modal-window"},It={class:"modal",role:"dialog","aria-labelledby":"modalTitle","aria-describedby":"modalDescription"},yt={class:"modal-header",id:"modalTitle"},xt={class:"modal-body",id:"modalDescription"},Qt={class:"modal-footer"};function kt(t,e,i,s,n,l){return(0,o.Wz)(),(0,o.Az)(a.Ox,{name:"modal-fade"},{default:(0,o.Ql)((()=>[(0,o.QD)("div",Dt,[(0,o.QD)("div",It,[(0,o.QD)("header",yt,[(0,o.oF)(t.$slots,"header"),(0,o.QD)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...t)=>l.close&&l.close(...t)),"aria-label":"Close modal"}," x ")]),(0,o.QD)("section",xt,[(0,o.oF)(t.$slots,"body")]),(0,o.QD)("footer",Qt,[(0,o.oF)(t.$slots,"footer")])])])])),_:3})}var Mt={name:"ModalWindow",methods:{close(){this.$emit("close")}}};const St=(0,l.c)(Mt,[["render",kt]]);var Ut=St;const Et=t=>((0,o.ED)("data-v-16b8106a"),t=t(),(0,o.ii)(),t),Rt={class:"status-bar"},Bt={class:"left-side"},Wt={key:0},Nt={key:1},Xt={key:2},Yt={key:4},Ft=Et((()=>(0,o.QD)("label",{for:"scale"},"Scale",-1))),zt=["value"];function Kt(t,e,i,a,s,n){return(0,o.Wz)(),(0,o.An)("div",Rt,[(0,o.QD)("div",Bt,[t.state?((0,o.Wz)(),(0,o.An)("span",Wt," State: "+(0,g.WA)(t.state),1)):(0,o.g1)("",!0),t.imageWidth&&t.imageHeight?((0,o.Wz)(),(0,o.An)("span",Nt," | Width: "+(0,g.WA)(t.imageWidth)+" Height: "+(0,g.WA)(t.imageHeight),1)):(0,o.g1)("",!0),"pipette"===t.state&&t.pickedColor?((0,o.Wz)(),(0,o.An)("span",Xt," | Color: "+(0,g.WA)(t.pickedColor),1)):(0,o.g1)("",!0),"pipette"===t.state&&t.pickedColor?((0,o.Wz)(),(0,o.An)("div",{key:3,class:"pipette-color",style:(0,g.MN)({background:t.pickedColor})},null,4)):(0,o.g1)("",!0),"pipette"===t.state&&t.pickedColor&&t.xMouse&&t.yMouse?((0,o.Wz)(),(0,o.An)("span",Yt," | Coordinates: "+(0,g.WA)(t.xMouse)+":"+(0,g.WA)(t.yMouse),1)):(0,o.g1)("",!0)]),(0,o.QD)("div",null,[Ft,(0,o.QD)("input",{type:"range",class:"scale",id:"scale",name:"scale",min:"12",max:"300",step:"1",value:t.scale,onInput:e[0]||(e[0]=(...e)=>t.updateScale&&t.updateScale(...e))},null,40,zt)])])}var Gt=(0,o._M)({name:"StatusBar",props:{state:String,imageHeight:Number,imageWidth:Number,pickedColor:String,xMouse:Number,yMouse:Number,scale:Number},methods:{updateScale(t){const e=+t.target.value;this.$emit("updateScale",e)}}});const Ot=(0,l.c)(Gt,[["render",Kt],["__scopeId","data-v-16b8106a"]]);var Lt=Ot;function Pt(t,e,i,s,n,l){const r=(0,o.E1)("CorrectionModal"),c=(0,o.E1)("FiltrationModal");return(0,o.Wz)(),(0,o.An)(o.ae,null,[(0,o.QD)("canvas",{ref:"canvas",class:(0,g.WN)(["canvas",t.state]),id:"canvas",onMousedown:e[0]||(e[0]=(...e)=>t.handleMouseDown&&t.handleMouseDown(...e)),onMousemove:e[1]||(e[1]=(...e)=>t.handleMouseMove&&t.handleMouseMove(...e)),onMouseup:e[2]||(e[2]=(...e)=>t.handleMouseUp&&t.handleMouseUp(...e)),onWheel:e[3]||(e[3]=(...e)=>t.handleMouseWheel&&t.handleMouseWheel(...e)),tabindex:"0"},null,34),(0,o.wt)((0,o.K2)(r,{state:t.state,canvasRef:t.canvasRef||{},origImg:t.origImg,newImg:t.newImg,dx:t.offsetX,dy:t.offsetY,iw:t.iw,ih:t.ih,onUpdateNewImgData:e[4]||(e[4]=e=>t.$emit("updateNewImgData",e)),onRevertNewImg:e[5]||(e[5]=e=>t.$emit("revertNewImg")),onClose:e[6]||(e[6]=e=>t.$emit("closeCorrection"))},null,8,["state","canvasRef","origImg","newImg","dx","dy","iw","ih"]),[[a.Ub,t.isShowCorrection]]),(0,o.wt)((0,o.K2)(c,{state:t.state,canvasRef:t.canvasRef||{},origImg:t.origImg,newImg:t.newImg,dx:t.offsetX,dy:t.offsetY,iw:t.iw,ih:t.ih,onUpdateNewImgData:e[7]||(e[7]=e=>t.$emit("updateNewImgData",e)),onRevertNewImg:e[8]||(e[8]=e=>t.$emit("revertNewImg")),onClose:e[9]||(e[9]=e=>t.$emit("closeFiltration"))},null,8,["state","canvasRef","origImg","newImg","dx","dy","iw","ih"]),[[a.Ub,t.isShowFiltration]])],64)}var jt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC4ElEQVR4nO2YXWjPURjHP7NJNqaZ12UuNW8XSm6YC+KKUFpC89ouSMIVF5gVd+QtxMSGlBsxryNvyYVFody4mAuJshUuzGz01PnX43TWnt/vv+1PnW+d+nd+z/c533POc57nnD9EREREREREMBFYDRwFmoF3QBvwy7U21yffjjjb8lyvWxmwC3gJ/E7ZXgA7gfEDKXwKcBHozEK43zqBRqCiP4WPAk4BXQEBP4A7wG5gETAZKAHyXStxfYuBPcBdoCPgR8LtBFDa1+KXAJ8DA74C1gPFKXwKZwPwOuD3k5ts1igADgUGeAAsAPL6YIw8YCHwMDDOQbeDqVAE3PYctrsV7wvhPvLcjrR7Y94ECpM6Gw489hzdGqBsURZYONmdYVYHg92B1A5Ou3DqDbLdy4AG4C3w3TX5fR5YagyJAqA+sIAWDZz0iLUWEjAfeGNImXJo5xlDqs7jHu+NtCJwiCzY7lKgNe+L7Taj78Met6onw7Gu5GcMm41bVuMN8MXl+hkuERS533s9/9I2GvyLhvue/zEhw0Zl1AqMNDifBvz0Jl3aSzG8p+w7gKmGccTne8U75xtM9yrscmxoUpynwBADR2yeKd5141hVitPlT/yy+ijp03oD7VZ3mUnYUaHuUt3Gm6kc6idK56XMh3FeGMw0itisOFdJjmuKv8nImeWFn5xbdqjORwkEHFO8LSkmsFXx5R1hhd4FyX5/Vdy1CRxdSXFmNIST4YsvK9b54f5N5WbJElacTTnxkJD6BLzRquZ8lY4DrmNfQgG1SoAUm6SQsMnwpUYkQZ3TvJ8sUKkEfACGJuCK7UfFn0MOkO8VF+udCe+O0woMIkdY4xWXaiNHF81qcghZuRtKjBSlM8CEgG154IrclMvVz2AE0OIJkxV+DlxwrSXwZ4B8T/OW7hcUOqHW63RDmmfiQKDSvWE7evjrRcJtNv8BioG5wCpgpZuYvLMjIiIiIiIiIviH8Aff6FZXZ8W/vgAAAABJRU5ErkJggg==",Ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAABgUlEQVR4nO3UTUtVURTG8R9aZChBIWmhUEEQac4Swm/QsEIQ7yCivoQTm0Wz6AvUQDEbhaQYBUJB83IQvgwcqIMgiAp0ICob1onNGeS53gsS+Ic9OHuv9TxnrbP24ZgGuYQxvMc6tvAbq3iFh+g4jHAPprGDvQPWTzxGW1XxIfyK5G28xB30hkh64+t4hIXM6BvOVDG4FwmvcbFC/C18jdZ1Va2iXX204LSj5Br6mqjXjxv5xnf8ibFslCvxPX7km5PxYeejn4elBR9CK2n+5UJUkQ6eNGDwLDSSVnf5cDib6adorUP4JJ5n+bfLAeexWLqhC3GhDuImPpdy53CqCDiXiS/Grd2M5x3MoIarMevt2U2exW7EbuBB1uq5ogujmXiqJHEW7yr8h4o1HTnFiBYmA6KUWhaQOIGlCHqBt1jLBJcxFW+5F1XmXMbdf/X1fiSuhFlBYVDQmf0YB9XBl0iqlfbLBmKs095EPQbj0ZrWCgaptW8wogl8wsdmCP0/7APj9XeNzVdGIQAAAABJRU5ErkJggg==";const Vt=t=>((0,o.ED)("data-v-430b5c30"),t=t(),(0,o.ii)(),t),Tt={class:"correction-info-panel"},$t={class:"panel-header"},Jt={class:"correction-inputs"},Zt={class:"point-inputs"},qt={class:"point-with-prefix"},_t=Vt((()=>(0,o.QD)("label",{for:"x1",style:{left:"3px"}},"x1",-1))),te=["value","disabled"],ee={class:"point-with-prefix"},ie=Vt((()=>(0,o.QD)("label",{for:"y1",style:{left:"3px"}},"y1",-1))),ae=["value","disabled"],oe={class:"point-inputs"},se={class:"point-with-prefix"},ne=Vt((()=>(0,o.QD)("label",{for:"x2",style:{left:"3px"}},"x2",-1))),le=["value","disabled"],re={class:"point-with-prefix"},ce=Vt((()=>(0,o.QD)("label",{for:"y2",style:{left:"3px"}},"y2",-1))),he=["value","disabled"],de={class:"correction-preview"},ue={class:"custom-checkbox"},pe={key:0,class:"checkbox-image",src:jt,alt:"Lock"},ge={key:1,class:"checkbox-image",src:Ht,alt:"Unlock"},me={class:"correction-actions"},we=["disabled"],be={class:"correction-graph"},fe={id:"chart",width:"100",height:"100",ref:"chart"};function ve(t,e,i,s,n,l){return(0,o.Wz)(),(0,o.An)("div",Tt,[(0,o.QD)("div",$t,[(0,o.QD)("button",{class:"close-button",onClick:e[0]||(e[0]=(...e)=>t.close&&t.close(...e))},"x")]),(0,o.QD)("div",Jt,[(0,o.QD)("div",Zt,[(0,o.QD)("div",qt,[_t,(0,o.QD)("input",{id:"x1",value:t.point1x,onChange:e[1]||(e[1]=(...e)=>t.updateX1&&t.updateX1(...e)),disabled:t.previewEnabled},null,40,te)]),(0,o.QD)("div",ee,[ie,(0,o.QD)("input",{id:"y1",value:t.point1y,onChange:e[2]||(e[2]=(...e)=>t.updateY1&&t.updateY1(...e)),disabled:t.previewEnabled},null,40,ae)])]),(0,o.QD)("div",oe,[(0,o.QD)("div",se,[ne,(0,o.QD)("input",{id:"x2",value:t.point2x,onChange:e[3]||(e[3]=(...e)=>t.updateX2&&t.updateX2(...e)),disabled:t.previewEnabled},null,40,le)]),(0,o.QD)("div",re,[ce,(0,o.QD)("input",{id:"y2",value:t.point2y,onChange:e[4]||(e[4]=(...e)=>t.updateY2&&t.updateY2(...e)),disabled:t.previewEnabled},null,40,he)])]),(0,o.QD)("div",de,[(0,o.QD)("div",ue,[(0,o.wt)((0,o.QD)("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=e=>t.previewEnabled=e)},null,512),[[a.cV,t.previewEnabled]]),t.previewEnabled?((0,o.Wz)(),(0,o.An)("img",pe)):((0,o.Wz)(),(0,o.An)("img",ge))])])]),(0,o.QD)("div",me,[(0,o.QD)("button",{class:"correction-button",onClick:e[6]||(e[6]=(...e)=>t.applyCorrection&&t.applyCorrection(...e)),disabled:t.imgCorrected}," Apply ",8,we),(0,o.QD)("button",{class:"correction-button",onClick:e[7]||(e[7]=(...e)=>t.resetValues&&t.resetValues(...e))},"Reset")]),(0,o.QD)("div",be,[(0,o.QD)("canvas",fe,null,512)])])}var Ae=i(1516),Ce=(0,o._M)({name:"CorrectionModal",props:{state:String,canvasRef:Object,origImg:Object,newImg:Object,dx:Number,dy:Number,ih:Number,iw:Number},mounted(){this.chartRef=this.$refs.chart},data(){return{point1x:0,point1y:0,point2x:255,point2y:255,previewEnabled:!1,chartInstance:null,imgCorrected:!1}},methods:{close(){this.$emit("close")},normalizeHistogram(t){const e=Math.max(...t);return t.map((t=>t/e*255))},buildGraph(){const t=new Image;t.onload=()=>{const t=this.canvasRef?.getContext("2d");try{const e=t.getImageData(this.dx,this.dy,this.iw,this.ih),i=e.data,a=new Array(256).fill(0),o=new Array(256).fill(0),s=new Array(256).fill(0);for(let t=0;t<i.length;t+=4){const e=i[t],n=i[t+1],l=i[t+2];a[e]++,o[n]++,s[l]++}const n=this.normalizeHistogram(a),l=this.normalizeHistogram(o),r=this.normalizeHistogram(s);this.drawHistograms(n,l,r)}catch(e){console.log(e)}},t.src=this.origImg.src},drawHistograms(t,e,i){const a=this.chartRef?.getContext("2d");this.chartInstance&&this.chartInstance.destroy(),this.chartInstance=new Ae.cp(a,{type:"line",data:{labels:Array.from({length:256},((t,e)=>e)),datasets:[{label:"Red",data:t,backgroundColor:"rgba(255, 0, 0, 0.8)"},{label:"Green",data:e,backgroundColor:"rgba(0, 255, 0, 0.8)"},{label:"Blue",data:i,backgroundColor:"rgba(0, 0, 255, 0.8)"},{label:"line",data:[{x:0,y:this.point1y},{x:this.point1x,y:this.point1y},{x:this.point2x,y:this.point2y},{x:255,y:this.point2y}],borderColor:"rgba(0,0,0,1)",borderWidth:1,fill:!1}]},options:{animation:!1,scales:{y:{beginAtZero:!0}}}})},calculateCorrection(){try{const t=[];for(let o=0;o<this.point1x;o++)t[o]=this.point1y;for(let o=this.point1x;o<this.point2x;o++){const e=(this.point2y-this.point1y)/(this.point2x-this.point1x);let i=this.point1y+e*(o-this.point1x);i=Math.max(0,Math.min(255,i)),t[o]=i}for(let o=this.point2x;o<256;o++)t[o]=this.point2y;const e=this.canvasRef?.getContext("2d"),i=e.getImageData(this.dx,this.dy,this.iw,this.ih),a=i.data;for(let o=0;o<a.length;o+=4)a[o]=t[a[o]],a[o+1]=t[a[o+1]],a[o+2]=t[a[o+2]];e.putImageData(i,this.dx,this.dy),this.$emit("updateNewImgData",a),this.imgCorrected=!0}catch(t){console.log(t)}},revertCorrection(){this.$emit("revertNewImg"),this.imgCorrected=!1},applyCorrection(){this.$emit("close"),this.calculateCorrection(),this.buildGraph()},resetValues(){this.point1x=0,this.point1y=0,this.point2x=255,this.point2y=255,this.revertCorrection()},updateX1(t){const e=+t.target.value;!isNaN(e)&&e>=0&&e<this.point2x?(this.point1x=e,this.buildGraph()):(this.point1x+=1,this.point1x-=1)},updateY1(t){const e=+t.target.value;!isNaN(e)&&e>=0&&e<255?(this.point1y=e,this.buildGraph()):(this.point1y+=1,this.point1y-=1)},updateX2(t){const e=+t.target.value;!isNaN(e)&&e<=255&&this.point1x<=e?(this.point2x=e,this.buildGraph()):(this.point2x+=1,this.point2x-=1)},updateY2(t){const e=+t.target.value;!isNaN(e)&&e<=255&&0<=e?(this.point2y=e,this.buildGraph()):(this.point2y+=1,this.point2y-=1)}},watch:{newImg(){this.buildGraph()},previewEnabled(t){t?this.calculateCorrection():this.revertCorrection()}}});const De=(0,l.c)(Ce,[["render",ve],["__scopeId","data-v-430b5c30"]]);var Ie=De;const ye=t=>((0,o.ED)("data-v-0dbf6706"),t=t(),(0,o.ii)(),t),xe={class:"filtration-modal"},Qe={class:"panel-header"},ke={class:"filtrations-graph"},Me=ye((()=>(0,o.QD)("option",{value:"identity",title:"Тождественное отображение"}," Identity Transformation ",-1))),Se=ye((()=>(0,o.QD)("option",{value:"sharpen",title:"Повышение резкости"},"Sharpen",-1))),Ue=ye((()=>(0,o.QD)("option",{value:"gaussian",title:"Фильтр Гаусса"}," Gaussian Filter (3x3) ",-1))),Ee=ye((()=>(0,o.QD)("option",{value:"boxBlur",title:"Прямоугольное размытие"},"Box Blur",-1))),Re=[Me,Se,Ue,Ee],Be={class:"filtration-content"},We={class:"filtration-inputs"},Ne={class:"point-inputs"},Xe=["value","onChange"],Ye={class:"filtration-actions"},Fe={class:"custom-checkbox"},ze={key:0,class:"checkbox-image",src:jt,alt:"Lock"},Ke={key:1,class:"checkbox-image",src:Ht,alt:"Unlock"};function Ge(t,e,i,s,n,l){return(0,o.Wz)(),(0,o.An)("div",xe,[(0,o.QD)("div",Qe,[(0,o.QD)("button",{class:"close-button",onClick:e[0]||(e[0]=(...e)=>t.close&&t.close(...e))},"x")]),(0,o.QD)("div",ke,[(0,o.QD)("select",{class:"filtration-preset",onChange:e[1]||(e[1]=e=>t.applyPreset(e.target.value))},Re,32),(0,o.QD)("div",Be,[(0,o.QD)("div",We,[(0,o.QD)("div",Ne,[((0,o.Wz)(!0),(0,o.An)(o.ae,null,(0,o.mi)(t.kernel,((e,i)=>((0,o.Wz)(),(0,o.An)("div",{class:"point-inputs-column",key:i},[((0,o.Wz)(!0),(0,o.An)(o.ae,null,(0,o.mi)(e,((e,a)=>((0,o.Wz)(),(0,o.An)("div",{key:a,class:"point-with-prefix"},[(0,o.QD)("input",{value:t.kernel[i][a],onChange:e=>t.updateKernel(e,i,a)},null,40,Xe)])))),128))])))),128))])]),(0,o.QD)("div",Ye,[(0,o.QD)("div",Fe,[(0,o.wt)((0,o.QD)("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=e=>t.previewEnabled=e)},null,512),[[a.cV,t.previewEnabled]]),t.previewEnabled?((0,o.Wz)(),(0,o.An)("img",ze)):((0,o.Wz)(),(0,o.An)("img",Ke))]),(0,o.QD)("button",{class:"filtration-button",onClick:e[3]||(e[3]=(...e)=>t.applyFiltration&&t.applyFiltration(...e))}," Apply "),(0,o.QD)("button",{class:"filtration-button",onClick:e[4]||(e[4]=(...e)=>t.resetFiltration&&t.resetFiltration(...e))}," Reset ")])])])])}var Oe=(0,o._M)({name:"FiltrationModal",props:{state:String,canvasRef:Object,origImg:Object,newImg:Object,dx:Number,dy:Number,ih:Number,iw:Number},data(){return{previewEnabled:!1,kernel:[[0,0,0],[0,1,0],[0,0,0]]}},methods:{close(){this.$emit("close")},applyPreset(t){switch(t){case"identity":this.kernel=[[0,0,0],[0,1,0],[0,0,0]];break;case"sharpen":this.kernel=[[0,-1,0],[-1,5,-1],[0,-1,0]];break;case"gaussian":this.kernel=[[1,2,1],[2,4,2],[1,2,1]];break;case"boxBlur":this.kernel=[[1,1,1],[1,1,1],[1,1,1]];break;default:break}},updateKernel(t,e,i){const a=+t.target.value;isNaN(a)?(this.kernel[e][i]+=1,this.kernel[e][i]-=1):this.kernel[e][i]=a},calculateFiltration(){const t=this.canvasRef?.getContext("2d"),e=t.getImageData(this.dx,this.dy,this.iw,this.ih),i=new Uint8ClampedArray(e.data.length),a=this.padImageData(e.data,e.width,e.height);for(let o=0;o<e.height;o++)for(let t=0;t<e.width;t++)for(let s=0;s<4;s++){const n=4*(o*e.width+t)+s;let l=0,r=0;for(let i=0;i<3;i++)for(let n=0;n<3;n++){const c=4*((o+i)*(e.width+2)+(t+n))+s;l+=a[c]*this.kernel[i][n],r+=this.kernel[i][n]}i[n]=l/r}e.data.set(i),t.putImageData(e,this.dx,this.dy)},padImageData(t,e,i){const a=e+2,o=i+2,s=new Uint8ClampedArray(a*o*4);for(let n=0;n<i;n++)for(let i=0;i<e;i++){const o=4*(n*e+i),l=4*((n+1)*a+i+1);s.set(t.subarray(o,o+4),l)}for(let n=0;n<o;n++)for(let t=0;t<a;t++){const e=4*(n*a+t);if(0===t||t===a-1||0===n||n===o-1){const i=Math.max(1,Math.min(t,a-2)),l=Math.max(1,Math.min(n,o-2)),r=4*(l*a+i);s.set(s.subarray(r,r+4),e)}}return s},applyFiltration(){this.$emit("close"),this.calculateFiltration()},resetFiltration(){this.$emit("revertNewImg"),this.previewEnabled=!1,this.applyPreset("identity")}},watch:{previewEnabled(t){t?this.calculateFiltration():(this.$emit("revertNewImg"),this.previewEnabled=!1)}}});const Le=(0,l.c)(Oe,[["render",Ge],["__scopeId","data-v-0dbf6706"]]);var Pe=Le,je=(0,o._M)({name:"MainCanvas",components:{CorrectionModal:Ie,FiltrationModal:Pe},props:{state:String,img:String,origImg:Object,newImg:Object,scale:Number,interpolationCb:Function,newiw:Number,newih:Number,isShowCorrection:Boolean,isShowFiltration:Boolean},emits:["updateImageSizes","updateColor","updateCoordinates","closeCorrection","closeFiltration","revertNewImg","updateNewImgData"],data(){return{isDragging:!1,startX:0,startY:0,offsetX:0,offsetY:0,isShiftPressed:!1,iw:0,ih:0,canvasRef:null}},mounted(){this.canvasRef=this.$refs.canvas,window.addEventListener("keydown",this.handlePressShiftKey),window.addEventListener("keyup",this.handleUnpressShiftKey)},beforeUnmount(){window.removeEventListener("keydown",this.handleEscapeKey),window.removeEventListener("keyup",this.handleUnpressShiftKey)},methods:{getCanvasRef(){return this.canvasRef},drawImage(t){const e=this.canvasRef,i=this.canvasRef?.getContext("2d"),a=t;a.onload=()=>{i.clearRect(0,0,e.width,e.height),e.width=this.canvasRef.clientWidth,e.height=this.canvasRef.clientHeight,i.imageSmoothingEnabled=!1;const[t,o,s,n]=this.getImageSizes(e,a),l=i.getImageData(t,o,s,n);if(this.imageData instanceof ImageData){const e=this.interpolationCb(l,~~s,~~n);null!==e&&i.putImageData(e,t,o)}else i.drawImage(a,t,o,s,n);this.offsetX=t,this.offsetY=o,this.iw=s,this.ih=n,this.$emit("updateImageSizes",s,n)},a.src=this.newImg.src},moveImage(){const t=this.canvasRef;this.offsetX+10>t.width&&(this.offsetX=t.width-10),this.offsetX+10>t.height&&(this.offsetY=t.height-10),this.offsetX+this.iw<10&&(this.offsetX=10-this.iw),this.offsetY+this.ih<10&&(this.offsetY=10-this.ih);const e=this.canvasRef?.getContext("2d"),i=this.newImg;i.onload=()=>{e.clearRect(0,0,t.width,t.height),t.width=this.canvasRef.clientWidth,t.height=this.canvasRef.clientHeight,e.imageSmoothingEnabled=!1,e.drawImage(i,this.offsetX,this.offsetY,this.iw,this.ih)},i.src=this.newImg.src},handleMouseDown(t){this.isDragging=!0,this.startX=t.clientX-this.offsetX,this.startY=t.clientY-this.offsetY,"pipette"==this.state&&(this.$emit("updateColor",this.handleColorPick(t)),this.$emit("updateCoordinates",this.handleCoordinates(t)))},handleMouseUp(){this.isDragging=!1},handleMouseMove(t){if("hand"===this.state&&this.isDragging){const e=t.clientX-this.startX,i=t.clientY-this.startY;this.offsetX=e,this.offsetY=i,this.moveImage()}},handleMouseWheel(t){t.preventDefault();const e=Math.sign(t.deltaY);this.isShiftPressed?this.offsetX-=7*e:this.offsetY+=7*e,this.moveImage()},handlePressShiftKey(t){"Shift"===t.key&&(this.isShiftPressed=!0)},handleUnpressShiftKey(t){"Shift"===t.key&&(this.isShiftPressed=!1)},getImageSizes(t,e){const i=100,a=t.width,o=t.height,s=e.width,n=e.height;return u(t,l(s,n,a,o),this.scale);function l(){return s<=a&&n<=o?r():a<=s&&n<=o?c():o<=n&&s<=a?h():a<s&&o<s?d():void 0}function r(){const t=(a-s)/2,e=(o-n)/2;return[s,n,t,e]}function c(){const t=a/s,e=n*t,l=i/2,r=Math.abs(e-o)/2;return[a-i,e,l,r]}function h(){const t=o/n,e=s*t,l=Math.abs(e-a)/2,r=i/2;return[e,o-i,l,r]}function d(){return n<=s?c():s<n?h():void 0}function u({width:t,height:e},[i,a,,],o){const s=o/100,n=i*s,l=a*s,r=(t-n)/2,c=(e-l)/2;return[r,c,n,l]}},handleColorPick({offsetX:t,offsetY:e}){const i=this.canvasRef.getContext("2d");if(!i)return;const a=i.getImageData(t,e,1,1).data;return`rgb(${a[0]}, ${a[1]}, ${a[2]})`},handleCoordinates({offsetX:t,offsetY:e,clientX:i,clientY:a}){const o=i-this.startX,s=a-this.startY,n=t-o,l=e-s;return n<=0||l<=0||this.iw<=n||this.ih<=l?[null,null]:[~~n,~~l]},saveImage(){const t=this.canvasRef.toDataURL("image/png"),e=document.createElement("a");e.href=t,e.download="my_image.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},watch:{state(t){"save"===t&&this.saveImage()},newImg(){this.drawImage(this.newImg)},scale(){this.drawImage(this.newImg)}}});const He=(0,l.c)(je,[["render",Pt]]);var Ve=He;const Te=t=>((0,o.ED)("data-v-5b4636a8"),t=t(),(0,o.ii)(),t),$e={class:"color-info-panel"},Je={class:"panel-header"},Ze={class:"colors"},qe={class:"colors-info"},_e=Te((()=>(0,o.QD)("p",{class:"color-parameter"},"X",-1))),ti={class:"color-parameters"},ei=Te((()=>(0,o.QD)("p",{class:"color-parameter"},"Y",-1))),ii={class:"color-parameters"},ai=Te((()=>(0,o.QD)("p",{class:"color-parameter",title:"Color model combining red, green, and blue light intensities to create colors in digital displays."}," RGB ",-1))),oi={class:"color-parameters"},si=Te((()=>(0,o.QD)("p",{class:"color-parameter",title:"Standard color space representing human visual perception of colors, used as a foundation for other color spaces."}," XYZ ",-1))),ni={class:"color-parameters"},li=Te((()=>(0,o.QD)("p",{class:"color-parameter",title:"Perceptually uniform color space with components for lightness (L*) and color opponent axes (a*, b*), ideal for accurate color reproduction and correction."}," Lab ",-1))),ri={class:"color-parameters"};function ci(t,e,i,s,n,l){return(0,o.Wz)(),(0,o.An)("div",$e,[(0,o.QD)("div",Je,[(0,o.QD)("button",{class:"close-button",onClick:e[0]||(e[0]=(...e)=>t.close&&t.close(...e))},"x")]),(0,o.QD)("div",Ze,[(0,o.wt)((0,o.QD)("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.pickedButton=e),value:"button1",type:"radio",class:"color-button",style:(0,g.MN)({background:t.color1})},null,4),[[a.sz,t.pickedButton]]),(0,o.wt)((0,o.QD)("input",{"onUpdate:modelValue":e[2]||(e[2]=e=>t.pickedButton=e),value:"button2",type:"radio",class:"color-button",style:(0,g.MN)({background:t.color2})},null,4),[[a.sz,t.pickedButton]])]),(0,o.QD)("div",qe,[_e,(0,o.QD)("div",ti,[(0,o.QD)("p",null,(0,g.WA)(t.color1X),1),(0,o.QD)("p",null,(0,g.WA)(t.color2X),1)]),ei,(0,o.QD)("div",ii,[(0,o.QD)("p",null,(0,g.WA)(t.color1Y),1),(0,o.QD)("p",null,(0,g.WA)(t.color2Y),1)]),ai,(0,o.QD)("div",oi,[(0,o.QD)("p",null,(0,g.WA)(t.color1RGB),1),(0,o.QD)("p",null,(0,g.WA)(t.color2RGB),1)]),si,(0,o.QD)("div",ni,[(0,o.QD)("p",null,(0,g.WA)(t.color1XYZ),1),(0,o.QD)("p",null,(0,g.WA)(t.color2XYZ),1)]),li,(0,o.QD)("div",ri,[(0,o.QD)("p",null,(0,g.WA)(t.color1Lab),1),(0,o.QD)("p",null,(0,g.WA)(t.color2Lab),1)])]),t.colorContrast?((0,o.Wz)(),(0,o.An)("div",{key:0,class:"contrast",style:(0,g.MN)({color:t.colorContrast<4.5?"red":"black"})}," Contrast: "+(0,g.WA)(t.colorContrast)+":1 ",5)):(0,o.g1)("",!0)])}var hi=(0,o._M)({name:"SideBar",props:{pickedColor:String,xMouse:Number,yMouse:Number},data(){return{pickedButton:null,color1:null,color2:null,color1X:0,color1Y:0,color2X:0,color2Y:0,color1RGB:"",color2RGB:"",color1XYZ:"",color2XYZ:"",color1Lab:"",color2Lab:"",colorContrast:null}},methods:{close(){this.$emit("close")},handleColorClick(){this.$emit("changeState","pipette")},updateColors(){const t=this.parseColor(this.pickedColor),e=this.rgbToXyz(t),i=this.xyzToLab(e);"button1"===this.pickedButton?(this.color1X=this.xMouse,this.color1Y=this.yMouse,this.color1RGB=this.prettyColor(t,!0),this.color1XYZ=this.prettyColor(e),this.color1Lab=this.prettyColor(i)):(this.color2X=this.xMouse,this.color2Y=this.yMouse,this.color2RGB=this.prettyColor(t,!0),this.color2XYZ=this.prettyColor(e),this.color2Lab=this.prettyColor(i)),this.color1&&this.color2&&(this.colorContrast=this.calculateContrastRatio(this.color1,this.color2))},prettyColor([t,e,i],a=!1){return a?`${t}, ${e}, ${i}`:`${t.toFixed(1)}, ${e.toFixed(1)}, ${i.toFixed(1)}`},calculateContrastRatio(t,e){const i=t=>(t/=255,t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)),a=t=>{const e=this.parseColor(t),a=i(e[0]),o=i(e[1]),s=i(e[2]);return.2126*a+.7152*o+.0722*s},o=a(t),s=a(e),n=Math.max(o,s),l=Math.min(o,s),r=(n+.05)/(l+.05);return r.toFixed(1)},parseColor(t){if("#"==t.substr(0,1)){var e=(t.length-1)/3,i=[17,1,.062272][e-1];return[Math.round(parseInt(t.substr(1,e),16)*i),Math.round(parseInt(t.substr(1+e,e),16)*i),Math.round(parseInt(t.substr(1+2*e,e),16)*i)]}return t.split("(")[1].split(")")[0].split(",").map((t=>+t))},rgbToXyz(t){let e=t[0]/255,i=t[1]/255,a=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92,e*=100,i*=100,a*=100;const o=.4124*e+.3576*i+.1805*a,s=.2126*e+.7152*i+.0722*a,n=.0193*e+.1192*i+.9505*a;return[o,s,n]},xyzToLab(t){const[e,i,a]=t,o=95.047,s=100,n=108.883,l=e/o,r=i/s,c=a/n,h=.008856,d=903.3,u=t=>t>h?Math.pow(t,1/3):(d*t+16)/116,p=116*u(r)-16,g=500*(u(l)-u(r)),m=200*(u(r)-u(c));return[p,g,m]}},watch:{pickedColor(t){"button1"===this.pickedButton&&(this.color1=t,this.updateColors()),"button2"===this.pickedButton&&(this.color2=t,this.updateColors())}}});const di=(0,l.c)(hi,[["render",ci],["__scopeId","data-v-5b4636a8"]]);var ui=di,pi=(0,o._M)({name:"MainEditor",components:{ModalWindow:Ut,StatusBar:Lt,MainCanvas:Ve,SideBar:ui},props:{img:String,state:String},data(){return{canvasRef:null,newImg:null,origImg:null,isShowPanel:!1,isShowCorrection:!1,isShowFiltration:!1,resizeUnit:"pixels",iw:null,ih:null,newiw:null,newih:null,bind:!1,interpolation:"",isShowModal:!1,xMouse:null,yMouse:null,pickedColor:"",scale:100}},emits:["changeState"],mounted(){this.canvasRef=this.$refs.canvas.getCanvasRef()},methods:{closeModal(){this.isShowModal=!1,this.$emit("changeState","")},closePanel(){this.isShowPanel=!1,this.$emit("changeState","")},closeCorrection(){this.isShowCorrection=!1,this.$emit("changeState","")},closeFiltration(){this.isShowFiltration=!1,this.$emit("changeState","")},updateImageSizes(t,e){this.iw=t,this.ih=e},updateColor(t){this.pickedColor=t},updateCoordinates([t,e]){this.xMouse=t,this.yMouse=e},handleConfirm(){this.scale=100;const t=new Image;if(t.src=this.img,"pixels"===this.resizeUnit&&(t.width=this.newiw,t.height=this.newih),"percentage"===this.resizeUnit){const{width:e,height:i}=this.canvasRef,a=e/100,o=i/100;t.widht=this.newiw*a,t.height=this.newih*o}this.iw=t.width,this.ih=t.height,this.newImg=t,this.isShowModal=!1,this.$emit("changeState","")},updateModal(){if("pixels"===this.resizeUnit&&(null===this.newiw&&(this.newiw=this.iw,this.canvasRef.width<this.iw&&(this.newiw=this.canvasRef.width)),null===this.newih&&(this.newih=this.ih,this.canvasRef.height<this.ih&&(this.newih=this.canvasRef.height))),"percentage"===this.resizeUnit){const{width:t,height:e}=this.canvasRef,i=t/100,a=e/100;null==this.newiw&&(this.newiw=~~(this.iw/i),this.newih=~~(this.ih/a))}},updateNewiw(t){const e=+t.target.value;if(!isNaN(e)&&e>0){if(this.newiw=e,this.canvasRef.width<e&&(this.newiw=this.canvasRef.width),this.bind){const t=this.ih/this.iw;this.newih=~~(e*t)}}else this.newiw+=1,this.newiw-=1},updateNewih(t){const e=+t.target.value;if(!isNaN(e)&&e>0){if(this.newih=e,this.canvasRef.height<e&&(this.newih=this.canvasRef.height),this.bind){const t=this.iw/this.ih;this.newiw=~~(e*t)}}else this.newih+=1,this.newih-=1},getResolutionNow(){return(this.iw*this.ih/1e6).toFixed(2)},getResolutionAfter(){if("pixels"===this.resizeUnit)return(this.newiw*this.newih/1e6).toFixed(2);if("percentage"===this.resizeUnit){const{width:t,height:e}=this.canvasRef,i=t/100*(e/100);return(this.newiw*this.newih*i/1e6).toFixed(2)}},interpolationCb(t,e,i){return"nearestNeighbor"===this.interpolation?Ct(t,e,i):null},closeModals(){this.isShowPanel=!1,this.isShowModal=!1,this.isShowCorrection=!1,this.isShowFiltration=!1},revertNewImg(){const t=new Image;t.width=this.newImg.width,t.height=this.newImg.height,t.src=this.newImg.src,this.newImg=t},updateNewImgData(t){this.newImg.data=t}},watch:{state(t){"modal"===t&&(this.closeModals(),this.isShowModal=!0),"pipette"===t&&(this.closeModals(),this.isShowPanel=!0),"save"===t&&this.handleConfirm(),"correct"===t&&(this.closeModals(),this.isShowCorrection=!0),"filter"===t&&(this.closeModals(),this.isShowFiltration=!0),t||this.closeModals()},img(){this.iw=null,this.ih=null,this.newiw=null,this.newih=null,this.scale=100,this.origImg=new Image,this.origImg.src=this.img,this.newImg=this.origImg},isShowModal(t){t&&this.updateModal()}}});const gi=(0,l.c)(pi,[["render",At],["__scopeId","data-v-100da529"]]);var mi=gi,wi=(0,o._M)({name:"HomeView",components:{MainMenu:V,MainEditor:mi},data(){return{img:"",state:""}},methods:{handleImageSelected(t){this.img=t},changeState(t){this.state=t},handleEscapeKey(t){"Escape"===t.key&&(this.state="")}},mounted(){window.addEventListener("keydown",this.handleEscapeKey)},beforeUnmount(){window.removeEventListener("keydown",this.handleEscapeKey)}});const bi=(0,l.c)(wi,[["render",p],["__scopeId","data-v-772a71db"]]);var fi=bi;const vi=[{path:"/",name:"home",component:fi}],Ai=(0,d.gv)({history:(0,d.Ow)(),routes:vi});var Ci=Ai,Di=i(7192),Ii=(0,Di.eC)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,a.W0)(h).use(Ii).use(Ci).mount("#app")}},e={};function i(a){var o=e[a];if(void 0!==o)return o.exports;var s=e[a]={exports:{}};return t[a].call(s.exports,s,s.exports,i),s.exports}i.m=t,function(){var t=[];i.O=function(e,a,o,s){if(!a){var n=1/0;for(h=0;h<t.length;h++){a=t[h][0],o=t[h][1],s=t[h][2];for(var l=!0,r=0;r<a.length;r++)(!1&s||n>=s)&&Object.keys(i.O).every((function(t){return i.O[t](a[r])}))?a.splice(r--,1):(l=!1,s<n&&(n=s));if(l){t.splice(h--,1);var c=o();void 0!==c&&(e=c)}}return e}s=s||0;for(var h=t.length;h>0&&t[h-1][2]>s;h--)t[h]=t[h-1];t[h]=[a,o,s]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.p="/photoeditor/"}(),function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,s,n=a[0],l=a[1],r=a[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(o in l)i.o(l,o)&&(i.m[o]=l[o]);if(r)var h=r(i)}for(e&&e(a);c<n.length;c++)s=n[c],i.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return i.O(h)},a=self["webpackChunkphotoeditor"]=self["webpackChunkphotoeditor"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=i.O(void 0,[999],(function(){return i(8181)}));a=i.O(a)})();
//# sourceMappingURL=app.bb10fb29.js.map